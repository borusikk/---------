{% extends 'base.html' %}

{% block title %}–ö–∞—Ñ–µ–¥—Ä–∞ {{ department.name }}{% endblock %}

{% block content %}
<div class="container">
    <h1 class="my-4 text-center">üìö –ö–∞—Ñ–µ–¥—Ä–∞: {{ department.name }}</h1>

    <!-- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–∞—Ñ–µ–¥—Ä—É -->
    <div class="card shadow-sm mb-4">
        <div class="card-body">
            <h5 class="card-title">{{ department.faculty.name }}</h5>
            <p class="card-text">{{ department.description|default:"–û–ø–∏—Å –≤—ñ–¥—Å—É—Ç–Ω—ñ–π" }}</p>
        </div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è -->
    <div class="d-flex justify-content-center my-3">
        <a href="?sort=rating" class="btn btn-primary mx-2 {% if sort_option == 'rating' %}active{% endif %}">
            üìä –°–æ—Ä—Ç—É–≤–∞—Ç–∏ –∑–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–º
        </a>
        <a href="?sort=feedback_count" class="btn btn-secondary mx-2 {% if sort_option == 'feedback_count' %}active{% endif %}">
            üí¨ –°–æ—Ä—Ç—É–≤–∞—Ç–∏ –∑–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—é –≤—ñ–¥–≥—É–∫—ñ–≤
        </a>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ –≤–∏–∫–ª–∞–¥–∞—á—ñ–≤ –∫–∞—Ñ–µ–¥—Ä–∏ -->
    <h2 class="my-3">üë®‚Äçüè´ –í–∏–∫–ª–∞–¥–∞—á—ñ</h2>
    {% if professors %}
    <div class="row row-cols-1 row-cols-md-3 g-4">
        {% for professor in professors %}
        <div class="col">
            <div class="card shadow-sm h-100">
                <div class="d-flex justify-content-center align-items-center mt-3">
                    <!-- –§–æ—Ç–æ –≤–∏–∫–ª–∞–¥–∞—á–∞ –∑ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º –ø—Ä–æ–ø–æ—Ä—Ü—ñ–π -->
                    {% if professor.photo %}
                    <img src="{{ professor.photo.url }}" class="rounded img-fluid"
                         alt="–§–æ—Ç–æ {{ professor.name }}" style="max-width: 120px; height: auto;">
                    {% else %}
                    <img src="/static/default_photo.jpg" class="rounded-circle img-fluid"
                         alt="–§–æ—Ç–æ –≤—ñ–¥—Å—É—Ç–Ω—î" style="max-width: 120px; height: auto;">
                    {% endif %}
                </div>

                <div class="card-body text-center">
                    <h5 class="card-title">
                        <a href="{% url 'professor_detail' professor.id %}" class="text-decoration-none">
                            {{ professor.name }}
                        </a>
                    </h5>
                    <p class="card-text"><strong>‚≠ê –°–µ—Ä–µ–¥–Ω—ñ–π —Ä–µ–π—Ç–∏–Ω–≥:</strong> {{ professor.avg_rating|default:"0"|floatformat:1 }}</p>
                    <p class="card-text"><strong>üí¨ –í—ñ–¥–≥—É–∫–∏:</strong> {{ professor.feedback_count }}</p>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-center text-muted">–ù–∞ —Ü—ñ–π –∫–∞—Ñ–µ–¥—Ä—ñ –ø–æ–∫–∏ –Ω–µ–º–∞—î –≤–∏–∫–ª–∞–¥–∞—á—ñ–≤.</p>
    {% endif %}
</div>
{% endblock %}
